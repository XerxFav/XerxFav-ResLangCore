#!/bin/bash
# üß¨ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–∑–æ–≤—ã–π —Ä–µ–±–µ–π—Å

echo "üîÑ –§–∞–∑–æ–≤—ã–π —Ä–µ–±–µ–π—Å: –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º origin/main..."
git fetch origin main

echo "üß† –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
if ! git diff-index --quiet HEAD --; then
  echo "‚ö†Ô∏è –ï—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –°–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç –∏–ª–∏ stash."
  exit 1
fi

echo "üìê –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–µ–±–µ–π—Å..."
git rebase origin/main

if [ $? -eq 0 ]; then
  echo "‚úÖ –†–µ–±–µ–π—Å –∑–∞–≤–µ—Ä—à—ë–Ω. –ì–æ—Ç–æ–≤ –∫ —Ñ–∞–∑–æ–≤–æ–º—É –ø—É—à—É."
else
  echo "‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏ —Ä–µ–±–µ–π—Å–µ. –†–∞–∑—Ä–µ—à–∏ –≤—Ä—É—á–Ω—É—é –∏ –∑–∞–ø—É—Å—Ç–∏: git rebase --continue"
fi
